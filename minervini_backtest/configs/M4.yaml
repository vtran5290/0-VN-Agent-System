# M4 â€” VCP + Retest Entry (2-step, reduce false breakout)
name: M4
description: "TT_Strict or Lite + VCP; Breakout then buy on retest within 1-5 bars; Stop under retest low; Fail-fast + MA50 break"

tt: lite
ma200_slope_bars: 20

setup: vcp

lookback_base: 40
vol_mult: 1.5
close_strength: true

stop_pct: 0.05
atr_k: 2.0
risk_pct: 0.006

exits:
  hard_stop: true
  trend_break_ma: 50
  fail_fast_days: 3
  time_stop_days: 0
  take_partial_r: null
  trail_ma: null
  climax_proxy: false

fee_bps: 20
slippage_bps: 5
min_hold_bars: 0

# 2-step: only enter when retest succeeds
use_retest: true
retest_max_bars: 5
max_undercut_pct: 0.02
